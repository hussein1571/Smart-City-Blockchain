"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _defineProperty2 = require("babel-runtime/helpers/defineProperty");

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _extends3 = require("babel-runtime/helpers/extends");

var _extends4 = _interopRequireDefault(_extends3);

var _objectWithoutProperties2 = require("babel-runtime/helpers/objectWithoutProperties");

var _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);

var _sourceMapSupport2 = require("source-map-support");

exports.default = function (device) {
  var _device$lorawanDevice = device.lorawanDevice,
      lorawanDevice = _device$lorawanDevice === undefined ? {} : _device$lorawanDevice,
      _device$attributesMap = device.attributesMap,
      attributesMap = _device$attributesMap === undefined ? [] : _device$attributesMap,
      rest = (0, _objectWithoutProperties3.default)(device, ["lorawanDevice", "attributesMap"]);
  var appEui = lorawanDevice.appEui,
      devEui = lorawanDevice.devEui,
      devAddr = lorawanDevice.devAddr,
      nwkSKey = lorawanDevice.nwkSKey,
      appSKey = lorawanDevice.appSKey,
      appKey = lorawanDevice.appKey,
      lorawan = (0, _objectWithoutProperties3.default)(lorawanDevice, ["appEui", "devEui", "devAddr", "nwkSKey", "appSKey", "appKey"]);


  return (0, _extends4.default)({}, rest, lorawan, {
    appEui: hex(appEui),
    devEui: hex(devEui),
    appKey: hex(appKey),
    appSKey: hex(appSKey),
    nwkSKey: hex(nwkSKey),
    devAddr: hex(devAddr),
    attributes: attributesMap.reduce(function (acc, pair) {
      return (0, _extends4.default)({}, acc, (0, _defineProperty3.default)({}, pair[0], pair[1]));
    }, {})
  });
};

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

(0, _sourceMapSupport2.install)(); // Copyright Â© 2017 The Things Network
// Use of this source code is governed by the MIT license that can be found in the LICENSE file.

var hex = function hex(base64) {
  if (!base64) {
    return;
  }

  return new Buffer(base64, "base64").toString("hex");
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9hcHBsaWNhdGlvbnMvbm9ybWFsaXplLmpzIl0sIm5hbWVzIjpbImRldmljZSIsImxvcmF3YW5EZXZpY2UiLCJhdHRyaWJ1dGVzTWFwIiwicmVzdCIsImFwcEV1aSIsImRldkV1aSIsImRldkFkZHIiLCJud2tTS2V5IiwiYXBwU0tleSIsImFwcEtleSIsImxvcmF3YW4iLCJoZXgiLCJhdHRyaWJ1dGVzIiwicmVkdWNlIiwiYWNjIiwicGFpciIsImJhc2U2NCIsIkJ1ZmZlciIsInRvU3RyaW5nIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztrQkFlZSxVQUFVQSxNQUFWLEVBQW9DO0FBQUEsOEJBSzdDQSxNQUw2QyxDQUUvQ0MsYUFGK0M7QUFBQSxNQUUvQ0EsYUFGK0MseUNBRS9CLEVBRitCO0FBQUEsOEJBSzdDRCxNQUw2QyxDQUcvQ0UsYUFIK0M7QUFBQSxNQUcvQ0EsYUFIK0MseUNBRy9CLEVBSCtCO0FBQUEsTUFJNUNDLElBSjRDLDBDQUs3Q0gsTUFMNkM7QUFBQSxNQVEvQ0ksTUFSK0MsR0FlN0NILGFBZjZDLENBUS9DRyxNQVIrQztBQUFBLE1BUy9DQyxNQVQrQyxHQWU3Q0osYUFmNkMsQ0FTL0NJLE1BVCtDO0FBQUEsTUFVL0NDLE9BVitDLEdBZTdDTCxhQWY2QyxDQVUvQ0ssT0FWK0M7QUFBQSxNQVcvQ0MsT0FYK0MsR0FlN0NOLGFBZjZDLENBVy9DTSxPQVgrQztBQUFBLE1BWS9DQyxPQVorQyxHQWU3Q1AsYUFmNkMsQ0FZL0NPLE9BWitDO0FBQUEsTUFhL0NDLE1BYitDLEdBZTdDUixhQWY2QyxDQWEvQ1EsTUFiK0M7QUFBQSxNQWM1Q0MsT0FkNEMsMENBZTdDVCxhQWY2Qzs7O0FBaUJqRCxvQ0FDS0UsSUFETCxFQUVLTyxPQUZMO0FBR0VOLFlBQVFPLElBQUlQLE1BQUosQ0FIVjtBQUlFQyxZQUFRTSxJQUFJTixNQUFKLENBSlY7QUFLRUksWUFBUUUsSUFBSUYsTUFBSixDQUxWO0FBTUVELGFBQVNHLElBQUlILE9BQUosQ0FOWDtBQU9FRCxhQUFTSSxJQUFJSixPQUFKLENBUFg7QUFRRUQsYUFBU0ssSUFBSUwsT0FBSixDQVJYO0FBU0VNLGdCQUFZVixjQUFjVyxNQUFkLENBQXFCLFVBQVVDLEdBQVYsRUFBZUMsSUFBZixFQUFxQjtBQUNwRCx3Q0FDS0QsR0FETCxvQ0FFR0MsS0FBSyxDQUFMLENBRkgsRUFFYUEsS0FBSyxDQUFMLENBRmI7QUFJRCxLQUxXLEVBS1QsRUFMUztBQVRkO0FBZ0JELEM7Ozs7bUNBaEREO0FBQ0E7O0FBTUEsSUFBTUosTUFBTSxTQUFOQSxHQUFNLENBQVVLLE1BQVYsRUFBc0M7QUFDaEQsTUFBSSxDQUFDQSxNQUFMLEVBQWE7QUFDWDtBQUNEOztBQUVELFNBQU8sSUFBSUMsTUFBSixDQUFXRCxNQUFYLEVBQW1CLFFBQW5CLEVBQTZCRSxRQUE3QixDQUFzQyxLQUF0QyxDQUFQO0FBQ0QsQ0FORCIsImZpbGUiOiJub3JtYWxpemUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgwqkgMjAxNyBUaGUgVGhpbmdzIE5ldHdvcmtcbi8vIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IHRoZSBNSVQgbGljZW5zZSB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlLlxuXG4vLyBAZmxvd1xuXG5pbXBvcnQgdHlwZSB7IERldmljZSB9IGZyb20gXCIuL3R5cGVzXCJcblxuY29uc3QgaGV4ID0gZnVuY3Rpb24gKGJhc2U2NCA6ID9zdHJpbmcpIDogP3N0cmluZyB7XG4gIGlmICghYmFzZTY0KSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICByZXR1cm4gbmV3IEJ1ZmZlcihiYXNlNjQsIFwiYmFzZTY0XCIpLnRvU3RyaW5nKFwiaGV4XCIpXG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChkZXZpY2UgOiBPYmplY3QpIDogRGV2aWNlIHtcbiAgY29uc3Qge1xuICAgIGxvcmF3YW5EZXZpY2UgPSB7fSxcbiAgICBhdHRyaWJ1dGVzTWFwID0gW10sXG4gICAgLi4ucmVzdFxuICB9ID0gZGV2aWNlXG5cbiAgY29uc3Qge1xuICAgIGFwcEV1aSxcbiAgICBkZXZFdWksXG4gICAgZGV2QWRkcixcbiAgICBud2tTS2V5LFxuICAgIGFwcFNLZXksXG4gICAgYXBwS2V5LFxuICAgIC4uLmxvcmF3YW5cbiAgfSA9IGxvcmF3YW5EZXZpY2VcblxuICByZXR1cm4ge1xuICAgIC4uLnJlc3QsXG4gICAgLi4ubG9yYXdhbixcbiAgICBhcHBFdWk6IGhleChhcHBFdWkpLFxuICAgIGRldkV1aTogaGV4KGRldkV1aSksXG4gICAgYXBwS2V5OiBoZXgoYXBwS2V5KSxcbiAgICBhcHBTS2V5OiBoZXgoYXBwU0tleSksXG4gICAgbndrU0tleTogaGV4KG53a1NLZXkpLFxuICAgIGRldkFkZHI6IGhleChkZXZBZGRyKSxcbiAgICBhdHRyaWJ1dGVzOiBhdHRyaWJ1dGVzTWFwLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBwYWlyKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5hY2MsXG4gICAgICAgIFtwYWlyWzBdXTogcGFpclsxXSxcbiAgICAgIH1cbiAgICB9LCB7fSksXG4gIH1cbn1cbiJdfQ==